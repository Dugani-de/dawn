{% comment %} Version: 1.0.0 {% endcomment %}

{% comment %}
  ---------------------------------------------------------
  Copyright Â© 2024 Sternify. All rights reserved.
  Any unauthorized reproduction, alteration, or distribution
  of this code, in part or in whole, is expressly forbidden.
  Violators will be subject to legal prosecution to the maximum
  extent permitted by law. For permissions or inquiries,
  please contact us in our discord server: https://discord.gg/NHHCEPhsG8
  ---------------------------------------------------------
{% endcomment %}

<link rel="stylesheet" href="https://unpkg.com/flickity@2/dist/flickity.min.css">
<script src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"></script>

<style>
  *:focus-visible {
    box-shadow: none;
  }

  .st_wrapper.circle_menue{
    margin-top: {{ section.settings.margin_top }}px;
    margin-bottom: {{ section.settings.margin_bottom }}px;
  }

  swiper-container {
    width: 100%;
    padding: 0px 20px;
  }

  swiper-slide {
    max-width: {{ section.settings.bild_size }}px;
    text-align: center;
    font-size: 18px;
    background: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  swiper-slide {
  }

  .swiper-autoheight .swiper-wrapper {
    align-items: baseline !important;
  }

  .circle_menue_item_image {
    padding: 4px;
    border-radius: 50%;
    position: relative;
    border: 3px solid transparent;
    background: linear-gradient(white, white) padding-box, {{ section.settings.ring_farbe }} border-box;
  }

  .circle_menue_item_image img,
  .circle_menue_item_image svg {
    background-color: #f1f1f1;
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
    aspect-ratio: 1;
  }

  .circle_menue {
    max-width: 1000px;
    margin: 0px auto;
    display: flex;
    items-align: center;
    justify-content: center;
    padding-left: 10px;
  }

  .mySwiper {
    width: 100% !important;
    max-width: fit-content !important;
    margin: 0px auto;
  }

  .circle_menue_item_text {
    font-size: {{ section.settings.link_size }}px;
    width: inherit;
    color: {{ section.settings.titel_farbe }};
    word-wrap: break-word;
  }

  .circle_menue_item {
    position: relative;
    width: {{ section.settings.bild_size }}px;
    display: flex;
    flex-direction: column;
    gap: 5px;
    padding-top: 15px;
  }

  .circle_menue_item_badge {
    position: absolute;
    width: max-content;
    top: 0;
    left: 50%;
    transform: translate(-50%, -50%);
    background: {{ section.settings.badge_hintergrund }};
    color: {{ section.settings.badge_text }};
    padding: 4px 5px;
    border-radius: 5px;
    font-size: {{ section.settings.badge_size }}px;
    font-weight: 600;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10;
  }
</style>

<div class="st_wrapper circle_menue">
  <swiper-container
    class="mySwiper"
    init="false"
  >
    {%- for block in section.blocks -%}
      {%- case block.type -%}
        {%- when 'slide' -%}
          {%- assign bild = block.settings.bild -%}
          <swiper-slide>
            <a href="{{ block.settings.bild_link }}" class="circle_menue_item">
              <div class="circle_menue_item_image">
                {%- if bild -%}
                  <img src="{{ bild | image_url: width: "200" }}">
                {% else %}
                  {{ 'product-1' | placeholder_svg_tag }}
                {%- endif -%}

                {%- if block.settings.badge_text.size > 0 -%}
                  <div class="circle_menue_item_badge">
                    {{ block.settings.badge_text }}
                  </div>
                {%- endif -%}
              </div>
              <div class="circle_menue_item_text">{{ block.settings.bild_text }}</div>
            </a>
          </swiper-slide>
      {%- endcase -%}
    {%- endfor -%}
  </swiper-container>
</div>

<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-element-bundle.min.js"></script>

<script>
  function swiperInit() {
    const swiperEl = document.querySelector('swiper-container');
    Object.assign(swiperEl, {
      slidesPerView: 'auto',
      spaceBetween: {{ section.settings.space_between }},
      autoHeight: true,
    });
    swiperEl.initialize();
  }

  document.addEventListener('shopify:section:load', function () {
    swiperInit();
  });

  swiperInit();
</script>

{% schema %}
{
  "name": "ðŸ’«: Circle Menue",
  "class": "section",
  "tag": "section",
  "settings": [
    {
      "type": "header",
      "content": "AbstÃ¤nde"
    },
    {
      "type": "range",
      "id": "space_between",
      "label": "Abstand zwischen der einzelnen Slides",
      "min": 10,
      "max": 20,
      "step": 1,
      "default": 10,
      "info": "Speichere um die Ã„nderungen zu sehen"
    },
    {
      "type": "range",
      "id": "margin_top",
      "label": "Abstand nach oben",
      "min": -50,
      "max": 50,
      "step": 1,
      "default": 0
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "label": "Abstand nach unten",
      "min": -50,
      "max": 50,
      "step": 1,
      "default": 0
    },
    {
      "type": "header",
      "content": "Farben Einstellungen"
    },
    {
      "type": "color_background",
      "id": "ring_farbe",
      "label": "Ring Farbe",
      "default": "linear-gradient(45deg, red, yellow)"
    },
    {
      "type": "color",
      "id": "titel_farbe",
      "label": "Titel Farbe",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "badge_hintergrund",
      "label": "Badge Hintergrund",
      "default": "#db5a3d"
    },
    {
      "type": "color",
      "id": "badge_text",
      "label": "Badge Text",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "GrÃ¶ÃŸen"
    },
    {
      "type": "range",
      "id": "bild_size",
      "label": "Bild GrÃ¶ÃŸe",
      "min": 50,
      "max": 150,
      "step": 10,
      "default": 80,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "badge_size",
      "label": "Badge Text GrÃ¶ÃŸe",
      "min": 8,
      "max": 15,
      "step": 1,
      "default": 9,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "link_size",
      "label": "Link Text GrÃ¶ÃŸe",
      "min": 8,
      "max": 20,
      "step": 1,
      "default": 12,
      "unit": "px"
    }
  ],
  "blocks": [
    {
      "name": "Slide",
      "type": "slide",
      "settings": [
        {
          "type": "image_picker",
          "id": "bild",
          "label": "Bild",
          "info": "WÃ¤hle ein Bild fÃ¼r den Slide"
        },
        {
          "type": "url",
          "id": "bild_link",
          "label": "Bild Link"
        },
        {
          "type": "text",
          "id": "bild_text",
          "label": "Bild Text",
          "default": "Beispiel",
          "placeholder": "Collection oder Produkt Text eingeben"
        },
        {
          "type": "text",
          "id": "badge_text",
          "label": "Badge Text",
          "info": "Optional: Der Badge Text wird oberhalb des Bildes angezeigt.",
          "default": "10% Rabatt"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "ðŸ’«: Circle Menue",
      "blocks": [
        {
          "type": "slide"
        },
        {
          "type": "slide"
        },
        {
          "type": "slide"
        },
        {
          "type": "slide"
        },
        {
          "type": "slide"
        },
        {
          "type": "slide"
        }
      ]
    }
  ]
}
{% endschema %}
